model Enemy {
  id       EnemyIdent @id
  i18n_key String

  hp_from Int
  hp_to   Int

  damage_from Int
  damage_to   Int

  xp_from Int @default(0)
  xp_to   Int @default(0)

  money_from Int @default(0)
  money_to   Int @default(0)

  enemy_instances EnemyInstance[]
  enemy_place     EnemyInPlace[]
  enemy_loot      EnemyLoot[]
  slain           Slain[]
}

model EnemyInstance {
  id String @id @default(uuid())

  hp_actual Int
  hp_max    Int

  enemy    Enemy      @relation(fields: [enemy_id], references: [id], onDelete: Cascade)
  enemy_id EnemyIdent

  users User[]

  @@index([enemy_id])
}

model EnemyInPlace {
  id String @id @default(uuid())

  spawn_rate Float

  enemy    Enemy      @relation(fields: [enemy_id], references: [id], onDelete: Cascade)
  enemy_id EnemyIdent
  place    Place      @relation(fields: [place_id], references: [id], onDelete: Cascade)
  place_id String

  @@unique([enemy_id, place_id])
  @@index([enemy_id])
  @@index([place_id])
}

model EnemyLoot {
  id String @id @default(uuid())

  drop_chance Float

  enemy     Enemy      @relation(fields: [enemy_id], references: [id], onDelete: Cascade)
  enemy_id  EnemyIdent
  armor     Armor?     @relation(fields: [armor_id], references: [id], onDelete: Cascade)
  armor_id  String?
  weapon    Weapon?    @relation(fields: [weapon_id], references: [id], onDelete: Cascade)
  weapon_id String?

  @@unique([enemy_id, weapon_id, armor_id])
  @@index([enemy_id])
  @@index([armor_id])
  @@index([weapon_id])
}

enum EnemyIdent {
  // FOREST
  GOBLIN
  WOLF
  BANDIT
  // CEMETERY
  ZOMBIE
  SKELETON
  GHOUL
  // DESERT
  SCORPION
  SAND_WORM
  DESERT_BANDIT
  // FARM
  WILD_BOAR
  ANGRY_FARMER
  // SUBURB
  THIEF
  DRUNKARD
  // HILLS
  HILL_TROLL
  MOUNTAIN_GOAT
  // SWAMP
  SWAMP_LIZARD
  GIANT_LEECH
  SWAMP_GHOST
  // LAKE
  WATER_SPRITE
  GIANT_FROG
  DROWNED
}
